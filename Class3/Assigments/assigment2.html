<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mobile Brand and Model Filter</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  </head>
  <body class="bg-gray-100 flex items-center justify-center h-screen">
    <div class="bg-white p-6 rounded-lg shadow-md w-3xl">
      <h1 class="text-xl font-bold mb-4">Mobile Filter</h1>

      <!-- Brand Dropdown -->
      <div>
        <label for="brand" class="block text-xs font-medium text-gray-700">
          Select Brand
        </label>
        <select
          id="brand"
          class="py-2 block text-sm w-full border-gray-300 rounded-md shadow-sm focus:ring focus:ring-opacity-50"
          onchange="populateModels()"
        >
          <option value="">Select Brand</option>
          <option value="Apple">Apple</option>
          <option value="Samsung">Samsung</option>
          <option value="Google">Google</option>
        </select>
      </div>

      <div class="mt-4">
        <label for="model" class="block text-xs font-medium text-gray-700">
          Select Model
        </label>
        <select
          id="model"
          class="py-2 text-sm block w-full border-gray-300 rounded-md shadow-sm focus:ring focus:ring-opacity-50"
        >
          <option value="">Select Model</option>
        </select>
      </div>

      <button
        id="searchButton"
        class="mt-4 w-full bg-blue-500 text-white py-2 rounded-md"
        onclick="showSelection()"
      >
        Search
      </button>

      <div id="result" class="mt-4 text-lg font-semibold"></div>
      <div
        id="error"
        class="mt-4 text-red-700 text-lg font-semibold text-center"
      ></div>
    </div>

    <script>
      const models = {
        Apple: [
          {
            name: "iPhone 13",
            price: 799,
            details: "6.1-inch display, A15 Bionic chip, 5G capable.",
            stock: 3,
          },
          {
            name: "iPhone 12",
            price: 699,
            details: "6.1-inch display, A14 Bionic chip, 5G capable.",
            stock: 5,
          },
          {
            name: "iPhone 11",
            price: 599,
            details: "6.1-inch display, A13 Bionic chip.",
            stock: 2,
          },
        ],
        Samsung: [
          {
            name: "Galaxy S21",
            price: 799,
            details: "6.2-inch display, Exynos 2100, 5G capable.",
            stock: 4,
          },
          {
            name: "Galaxy Note 20",
            price: 999,
            details: "6.7-inch display, Snapdragon 865+, S Pen included.",
            stock: 2,
          },
          {
            name: "Galaxy A52",
            price: 349,
            details: "6.5-inch display, Snapdragon 720G.",
            stock: 6,
          },
        ],
        Google: [
          {
            name: "Pixel 6",
            price: 599,
            details: "6.4-inch display, Google Tensor chip, 5G capable.",
            stock: 3,
          },
          {
            name: "Pixel 5",
            price: 699,
            details: "6.0-inch display, Snapdragon 765G, 5G capable.",
            stock: 2,
          },
          {
            name: "Pixel 4a",
            price: 349,
            details: "5.8-inch display, Snapdragon 730G.",
            stock: 5,
          },
        ],
      };

      function populateModels() {
        const brandSelect = document.getElementById("brand");
        const modelSelect = document.getElementById("model");
        const selectedBrand = brandSelect.value;

        modelSelect.innerHTML = '<option value="">Select Model</option>';

        if (selectedBrand) {
          models[selectedBrand].forEach((model) => {
            const option = document.createElement("option");
            option.value = model.name;
            option.textContent = model.name;
            modelSelect.appendChild(option);
          });
        }
      }

      function showSelection() {
        const brandSelect = document.getElementById("brand");
        const modelSelect = document.getElementById("model");
        const resultDiv = document.getElementById("result");
        const errorDiv = document.getElementById("error");

        const selectedBrand = brandSelect.value;
        const selectedModelName = modelSelect.value;

        resultDiv.innerHTML = "";
        errorDiv.innerText = "";

        if (selectedBrand && selectedModelName) {
          const selectedModel = models[selectedBrand].find(
            (model) => model.name === selectedModelName
          );

          resultDiv.innerHTML = `
            <p>Brand: <strong>${selectedBrand}</strong></p>
            <p>Model: <strong>${selectedModel.name}</strong></p>
            <p>Price: <strong>$${selectedModel.price}</strong></p>
            <p>Details: ${selectedModel.details}</p>
            <p>Stock Available: <strong>${selectedModel.stock}</strong></p>

            <label for="quantity" class="block mt-2">Quantity:</label>
            <input type="number" id="quantity" name="quantity" min="1" max="${selectedModel.stock}" value="1" 
              class="p-2 block text-xs w-full border-gray-300 rounded-md shadow-sm focus:ring focus:ring-opacity-50"
               oninput="updateTotal(${selectedModel.price}, ${selectedModel.stock})">

            <p id="totalPrice" class="mt-2 text-green-700 font-bold text-center text-3xl">Total: $${selectedModel.price}</p>
          `;
        } else {
          errorDiv.innerText = "Please select both a brand and a model.";
        }
      }

      function updateTotal(price, stock) {
        const qty = parseInt(document.getElementById("quantity").value) || 1;
        const total = qty > stock ? stock * price : qty * price;
        document.getElementById("totalPrice").innerText = `Total: $${total}`;
      }
    </script>
  </body>
</html>
